# DOU-monitor

## Goal
Monitor DOU (Diario Oficial da Uniao) publications for concurso-related results, with fast preview and optional PDF export.

## Capabilities
- Scrapes DOU search results using the site embedded JSON data
- Handles connection retries and timeouts
- Filters results by keywords (abertura, inicio, iniciado)
- Preview mode prints the first 10 lines per result
- PDF export uses the site print layout for high fidelity output
- PDF export reuses a browser context with realistic locale and timezone

## How to Run
- Install dependencies and Playwright browsers
- Run the main script from the project root
- Use the export flag to save PDFs, or omit it for preview mode

Additional tools and workflow
- **Extraction (PDF → JSON):** After exporting PDFs the project can automatically extract structured summaries. The extractor saves summaries to `data/summaries/`.

- **Review CSV (human-in-the-loop):** Generate a CSV for manual review with:

```bash
.venv/bin/python src/review_cli.py --summaries-dir data/summaries
```

This writes `data/review_<timestamp>.csv` listing each summary, a confidence score and flagged issues.

- **Apply reviewed CSV:** After editing the CSV, apply corrections back to JSON summaries (dry-run by default):

```bash
.venv/bin/python src/apply_review.py --csv data/review_YYYYMMDDTHHMMSSZ.csv
```

To actually write changes and create backups use `--apply` and set a reviewer name:

```bash
.venv/bin/python src/apply_review.py --csv data/review_YYYYMMDDTHHMMSSZ.csv --apply --reviewer "SeuNome"
```

Files and folders
- `editais/` — saved PDFs generated by the scraper (print-quality via Playwright)
- `data/summaries/` — JSON summaries extracted from each PDF
- `data/review_*.csv` — generated CSVs for manual review
- `data/backups/` — backups created when applying CSV corrections

Dependencies (recommended)
- `pdfplumber` — PDF text and table extraction
- `dateparser` — normalize dates in Portuguese
- Playwright + browsers — PDF export


```bash
.venv/bin/pip install pdfplumber dateparser
# and install playwright browsers if you use PDF export
.venv/bin/python -m playwright install

Developer debugging guide
- A step-by-step walkthrough is available at `docs/debugger_walkthrough.md` (ignored by Git by default). It explains the pipeline flow, main functions to inspect, and quick interactive checks for common problems.
```

## Output
- Console summary with counts and result metadata
- Optional PDFs saved under the editais folder
